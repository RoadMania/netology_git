<a name="db1"></a> 06-db-06-troobleshooting</br></br>
<b>Задание 1. </b></br>
В первую очередь необходимо найти данную операцию - db.currentOp() </br> 
Прерываем выполнение командой db.killOp() </br>
Чтобы предоствраить проблему в будущем, для запросов CRUD возможно использование параметра maxTimeMS() в MongoDB. Плюс Database Profiler позволяет отловить медленные операции.</br>
</br>
<b>Задание 2. </b> <br> 
В Redis есть два способа очистить просроченные записи: </br>
1)Просроченные записи запрашиваются командой </br>
2)Повторяется каждые 100 миллисекунд и проводит записи в состояние устаревшие, затем данные записи исключаются. </br> ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOP по умолчанию имеет значение 20, а процесс выполняется десять раз в секунду, обычно активно истекает только 200 ключей в секунду. Этого достаточно, чтобы очистить БД достаточно быстро даже тогда, когда уже просроченные ключи не используются в течение длительного времени.</br> Истекшие ключи могут ззанимать много памяти, пока они не будут удалены</br></br>
<b>Задание 3. </b> <br>
Данная проблема возникает, когда происходит выборка очень большого количества данных.
Документация рекомендует нам увеличить настройку net_read_timeout со стандартных 30 до 60 секунд, но только в том случае, когда закончились другие пути оптимицации (индексы и тд.)</br> Можно попробовать увеличить max_allowed_packet, wait_timeout, net_read_timeout и net_write_timeout.<br>
<br><b>Задание 4. </b> <br>
Ошибка говорит, что закончилась выделенная память. </br>
Неверно был сконфигурировал PostreSQL. Нужно проверить файл конфигурации и проверить, всё ли нормально с настройками. Действительно ли указано столько памяти, сколько у нас есть физически на сервере. Для эффективности параметр shared_buffers должен быть 25% от общего объёма памяти. Однако в Windows системах рекомендуется этот параметр ставить не более 512 мегабайт. При увеличении shared_buffers обычно требуется увеличить checkpoint_segments, чтобы растянуть процесс записи большого объёма новых или изменённых данных на более продолжительное время.
Необходимо проверить настройки сервиса в части памяти, внести корректировки. <br> Увеличение ОЗУ также решит проблему.

